# 水位予測デモの使用方法

## 基本的な使い方

### 1. 対話型デモ（期間選択）
```bash
python water_level_prediction_demo.py
```
- デモ期間の候補が表示され、選択できます
- 静的デモまたはアニメーションデモを選択可能

### 2. 自動実行（デフォルト：期間1）
```bash
python run_demo_auto.py
```
- 期間1が自動的に選択され、静的デモが実行されます
- 予測結果のCSVファイルが自動保存されます

### 3. 期間番号を指定して実行
```bash
# 期間3を指定
python run_demo_auto.py --period 3
```
- 指定した期間番号（1-5）でデモを実行

### 4. 時刻を指定して実行
```bash
# 特定の時刻を指定
python run_demo_auto.py --time "2023-07-01 12:00:00"
```
- 指定時刻を含む期間でデモを実行
- 時刻は "YYYY-MM-DD HH:MM:SS" 形式で指定

## 出力ファイル

### 画像ファイル
- `prediction_demo_YYYYMMDD_HHMMSS.png`
  - 3段構成のグラフ（放流量、水位予測、予測誤差）

### CSVファイル（自動実行時）
1. `prediction_graph_data_YYYYMMDD_HHMMSS.csv`
   - **Excelでグラフ作成用のデータ（新形式）**
   - 時系列順に並んだデータで、散布図やライングラフが簡単に作成可能
   - カラム：
     - 時刻：データポイントの時刻
     - 実測水位：実際の水位値
     - 放流量：ダムの放流量
     - 予測実行回：何回目の予測実行か（1, 2, 3...）
     - 予測ホライズン(分)：予測時間（10, 20, 30...180）
     - 予測水位：予測された水位値
   - Excelでのグラフ作成方法：
     - 時刻をX軸、実測水位と予測水位をY軸に設定
     - 予測実行回でフィルタリングして特定の予測線を表示
     - 予測ホライズンで色分けして予測精度の変化を可視化

2. `prediction_results_YYYYMMDD_HHMMSS.csv`
   - 詳細な予測結果データ（分析用）
   - カラム：予測実行時刻、放流量、実測水位、予測時刻、予測時間、予測水位、実測水位（予測時刻）、予測誤差

3. `prediction_summary_YYYYMMDD_HHMMSS.csv`
   - 予測時間別の精度サマリー
   - カラム：予測時間、平均誤差、標準偏差、最小誤差、最大誤差、サンプル数、MAE、RMSE

## 注意事項
- `--period`と`--time`は同時に指定できません
- 時刻指定の場合、指定時刻の前後に十分なデータが必要です（前3時間、後3時間）
- データの範囲外の時刻を指定した場合、最も近い有効な時刻が使用されます